\ProvidesPackage{umlcomponent}

\usepackage{pgf,tikz}
\usetikzlibrary{calc,arrows}

\pgfdeclareshape{umlcomponent} {
    \inheritsavedanchors[from=rectangle]
    \inheritanchorborder[from=rectangle]
    \inheritanchor[from=rectangle]{center}
    \inheritanchor[from=rectangle]{north}
    \inheritanchor[from=rectangle]{north east}
    \inheritanchor[from=rectangle]{north west}
    \inheritanchor[from=rectangle]{south}
    \inheritanchor[from=rectangle]{south east}
    \inheritanchor[from=rectangle]{south west}
    \inheritanchor[from=rectangle]{west}
    \inheritanchor[from=rectangle]{east}
    \beforebackgroundpath{
				\tikz@mode% installs the mode settings
		
        \southwest \pgf@xa=\pgf@x \pgf@ya=\pgf@y
        \northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y
        \pgfpathmoveto{\pgfpoint{\pgf@xa}{\pgf@ya}}
        \pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@yb}}
        \pgfpathlineto{\pgfpoint{\pgf@xb}{\pgf@yb}}
        \pgfpathlineto{\pgfpoint{\pgf@xb}{\pgf@ya}}
        \pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@ya}}
				\pgfpathclose
				
				\northeast \pgf@xa=\pgf@x \pgf@ya=\pgf@y
				\northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y
				\advance\pgf@xa by -3pt
				\advance\pgf@xb by -8pt
				\advance\pgf@ya by -3pt
				\advance\pgf@yb by -10pt
        \pgfpathmoveto{\pgfpoint{\pgf@xa}{\pgf@ya}}
        \pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@yb}}
        \pgfpathlineto{\pgfpoint{\pgf@xb}{\pgf@yb}}
        \pgfpathlineto{\pgfpoint{\pgf@xb}{\pgf@ya}}
        \pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@ya}}
				\pgfpathclose
				
				\pgfsetfillcolor{white}
        \iftikz@mode@draw% fill and stroke if draw is choosen
            \pgfusepath{fill, stroke}
        \else% fill only if draw is not choosen
            \pgfusepath{fill}
        \fi
				
				\northeast \pgf@xa=\pgf@x \pgf@ya=\pgf@y
				\northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y
				\advance\pgf@xa by -7pt
				\advance\pgf@xb by -11pt
				\advance\pgf@ya by -4pt
				\advance\pgf@yb by -6pt
        \pgfpathmoveto{\pgfpoint{\pgf@xa}{\pgf@ya}}
        \pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@yb}}
        \pgfpathlineto{\pgfpoint{\pgf@xb}{\pgf@yb}}
        \pgfpathlineto{\pgfpoint{\pgf@xb}{\pgf@ya}}
        \pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@ya}}
				\pgfpathclose
				
				\pgfsetfillcolor{white}
        \iftikz@mode@draw% fill and stroke if draw is choosen
            \pgfusepath{fill, stroke}
        \else% fill only if draw is not choosen
            \pgfusepath{fill}
        \fi
				
				\northeast \pgf@xa=\pgf@x \pgf@ya=\pgf@y
				\northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y
				\advance\pgf@xa by -7pt
				\advance\pgf@xb by -11pt
				\advance\pgf@ya by -7pt
				\advance\pgf@yb by -9pt
        \pgfpathmoveto{\pgfpoint{\pgf@xa}{\pgf@ya}}
        \pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@yb}}
        \pgfpathlineto{\pgfpoint{\pgf@xb}{\pgf@yb}}
        \pgfpathlineto{\pgfpoint{\pgf@xb}{\pgf@ya}}
        \pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@ya}}
				\pgfpathclose
				
				\pgfsetfillcolor{white}
        \iftikz@mode@draw% fill and stroke if draw is choosen
            \pgfusepath{fill, stroke}
        \else% fill only if draw is not choosen
            \pgfusepath{fill}
        \fi
    }
}

% Key to add font macros to the current font
\tikzset{add font/.code={\expandafter\def\expandafter\tikz@textfont\expandafter{\tikz@textfont#1}}} 

% Define default style for this node
\tikzset{umlcomponent/port labels/.style={font=\sffamily}}
\tikzset{every umlcomponent node/.style={draw, inner sep=2mm, outer sep=0pt,font=\scriptsize}}